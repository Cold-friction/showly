kotlin.code.style=official

android.enableJetifier=false
android.useAndroidX=true

# ===============================
# ðŸš€ CI-Optimized Performance
# ===============================

# Build cache (critical for CI)
org.gradle.caching=true

# Parallel execution (GitHub runners have 4 cores)
org.gradle.parallel=true
org.gradle.workers.max=3

# Configuration cache (faster subsequent builds)
org.gradle.configuration-cache=true
org.gradle.configuration-cache.problems=warn

# Conservative memory allocation (leave headroom for parallel tasks)
org.gradle.jvmargs=-Xmx4g -XX:MaxMetaspaceSize=512m -XX:+UseG1GC -XX:+HeapDumpOnOutOfMemoryError -XX:MaxGCPauseMillis=200

# Kotlin compiler memory (conservative for parallel builds)
kotlin.daemon.jvmargs=-Xmx2g -XX:+UseG1GC

# Disable daemon (CI should use --no-daemon anyway)
org.gradle.daemon=false

# Disable file system watching (ephemeral CI runners)
org.gradle.vfs.watch=false

# ===============================
# Android build settings
# ===============================

# Disable BuildConfig by default
android.defaults.buildfeatures.buildconfig=false

# Faster resource compilation
android.nonFinalResIds=true

# Faster compilation across modules
android.nonTransitiveRClass=false

# ===============================
# ðŸ”§ CI-Specific Optimizations
# ===============================

# Kotlin incremental compilation
kotlin.incremental=true
kotlin.incremental.java=true

# KSP incremental processing (conservative memory)
ksp.incremental=true
ksp.incremental.log=false

# Suppress warnings in CI logs
kotlin.suppressExperimentalAnnotationWarning=true

# Show all warnings without failing build
org.gradle.warning.mode=all

# Remote build cache (if you enable it later)
org.gradle.caching.debug=false

# Disable console output colors
org.gradle.console=plain

# Stacktrace on failure
org.gradle.logging.stacktrace=all
